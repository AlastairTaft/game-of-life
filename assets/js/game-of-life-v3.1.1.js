!function(){var t=new window.Stats;t.t(0),t.i.style.position="absolute",t.i.style.right="0px",t.i.style.bottom="0px",t.i.style.zIndex="-999999",document.addEventListener("DOMContentLoaded",(function(){document.body.appendChild(t.i)}));var i={columns:0,rows:0,s:0,o:0,h:!1,autoplay:!1,clear:{u:!1},l:{algorithm:0,F:0},m:{o:null,v:null,p:null,hint:null,g:{C:null}},S:'[{"39":[110]},{"40":[112]},{"41":[109,110,113,114,115]}]',k:{M:!0,u:!1},D:{M:0,N:[{color:"#F3F3F3"},{color:"#FFFFFF"},{color:"#666666"},{color:""}]},zoom:{M:0,u:!1,N:[{columns:180,rows:86,I:4},{columns:300,rows:144,I:2},{columns:450,rows:216,I:1}]},R:{M:0,u:!1,N:[{U:"#FFFFFF",k:["#B5ECA2"],O:["#9898FF","#8585FF","#7272FF","#5F5FFF","#4C4CFF","#3939FF","#2626FF","#1313FF","#0000FF","#1313FF","#2626FF","#3939FF","#4C4CFF","#5F5FFF","#7272FF","#8585FF"]},{U:"#FFFFFF",k:["#EE82EE","#FF0000","#FF7F00","#FFFF00","#008000 ","#0000FF","#4B0082"],O:["#FF0000","#FF7F00","#FFFF00","#008000 ","#0000FF","#4B0082","#EE82EE"]},{U:"#FFFFFF",k:["#9898FF","#8585FF","#7272FF","#5F5FFF","#4C4CFF","#3939FF","#2626FF","#1313FF","#0000FF","#1313FF","#2626FF","#3939FF","#4C4CFF","#5F5FFF","#7272FF","#8585FF"],O:["#000000"]}]},init:function(){try{this.P.init(),this.T(),this.A(),this.G(),this.canvas.init(),this.L(),this.B()}catch(t){alert("Error: "+t)}},T:function(){var t,s,n;this.autoplay="1"===this.X.W("autoplay")||this.autoplay,this.k.M="1"===this.X.W("trail")||this.k.M,t=parseInt(this.X.W("colors"),10),(isNaN(t)||t<1||t>i.R.N.length)&&(t=1),s=parseInt(this.X.W("grid"),10),(isNaN(s)||s<1||s>i.D.N.length)&&(s=1),n=parseInt(this.X.W("zoom"),10),(isNaN(n)||n<1||n>i.zoom.N.length)&&(n=1),this.R.M=t-1,this.D.M=s-1,this.zoom.M=n-1,this.rows=this.zoom.N[this.zoom.M].rows,this.columns=this.zoom.N[this.zoom.M].columns},A:function(){var t,i,s,n,o=this.X.W("s");if("random"===o)this.Y();else for(null==o&&(o=this.S),t=window.jsonParse(decodeURI(o)),i=0;i<t.length;i++)for(n in t[i])for(s=0;s<t[i][n].length;s++)this.P._(t[i][n][s],parseInt(n,10),this.P.j)},Y:function(){var t,i=this.rows*this.columns*.12;for(t=0;t<i;t++)this.P._(this.X.random(0,this.columns-1),this.X.random(0,this.rows-1),this.P.j);this.P.q()},H:function(){this.P.init(),this.B()},B:function(){this.o=this.l.algorithm=this.l.F=0,this.J=this.clear.u=!1,this.m.o.innerHTML="0",this.m.p.innerHTML="0",this.m.v.innerHTML="0 / 0 (0 / 0)",this.canvas.K(),this.canvas.V(),this.autoplay&&(this.autoplay=!1,this.$.buttons.Z())},G:function(){this.m.o=document.getElementById("generation"),this.m.v=document.getElementById("steptime"),this.m.p=document.getElementById("livecells"),this.m.g.C=document.getElementById("layoutMessages"),this.m.hint=document.getElementById("hint")},L:function(){this.X.tt(document.body,"keyup",this.$.it,!1),this.X.tt(document.getElementById("buttonRun"),"click",this.$.buttons.Z,!1),this.X.tt(document.getElementById("buttonStep"),"click",this.$.buttons.step,!1),this.X.tt(document.getElementById("buttonClear"),"click",this.$.buttons.clear,!1),this.X.tt(document.getElementById("buttonExport"),"click",this.$.buttons.st,!1),this.X.tt(document.getElementById("buttonTrail"),"click",this.$.buttons.k,!1),this.X.tt(document.getElementById("buttonGrid"),"click",this.$.buttons.D,!1),this.X.tt(document.getElementById("buttonColors"),"click",this.$.buttons.R,!1)},nt:function(){var s,n,o,h,e,r,u;for(r=new Date,e=i.P.q(),r=new Date-r,u=new Date,s=0;s<i.P.ot.length;s++)n=i.P.ot[s][0],o=i.P.ot[s][1],1===i.P.ot[s][2]?i.canvas.ht(n,o):2===i.P.ot[s][2]?i.canvas.et(n,o):i.canvas.rt(n,o);if(u=new Date-u,i.k.u&&(i.k.u=!1,i.canvas.V()),i.D.u&&(i.D.u=!1,i.canvas.V()),i.R.u&&(i.R.u=!1,i.canvas.V()),i.o++,i.m.o.innerHTML=i.o,i.m.p.innerHTML=e,h=1/i.o,i.l.algorithm=i.l.algorithm*(1-h)+r*h,i.l.F=i.l.F*(1-h)+u*h,i.m.v.innerHTML=r+" / "+u+" ("+Math.round(i.l.algorithm)+" / "+Math.round(i.l.F)+")",i.h){function l(){t.ut(),window.requestAnimationFrame(i.nt),t.end()}i.s>0?setTimeout((function(){l()}),i.s):l()}else i.clear.u&&i.H()},$:{J:!1,lt:0,ct:0,at:function(t){var s=i.X.Ft(t);i.canvas.dt(s[0],s[1]),i.$.lt=s[0],i.$.ct=s[1],i.$.J=!0},ft:function(){i.$.J=!1},vt:function(t){if(i.$.J){var s=i.X.Ft(t);s[0]===i.$.lt&&s[1]===i.$.ct||(i.canvas.dt(s[0],s[1]),i.$.lt=s[0],i.$.ct=s[1])}},it:function(t){var s=t;s||(s=window.event),67===s.keyCode?i.$.buttons.clear():82===s.keyCode?i.$.buttons.Z():83===s.keyCode&&i.$.buttons.step()},buttons:{Z:function(){i.m.hint.style.display="none",i.h=!i.h,i.h?(i.nt(),document.getElementById("buttonRun").value="Stop"):document.getElementById("buttonRun").value="Run"},step:function(){i.h||i.nt()},clear:function(){i.h?(i.clear.u=!0,i.h=!1,document.getElementById("buttonRun").value="Run"):i.H()},k:function(){i.m.g.C.innerHTML=i.k.M?"Trail is Off":"Trail is On",i.k.M=!i.k.M,i.h?i.k.u=!0:i.canvas.V()},R:function(){i.R.M=(i.R.M+1)%i.R.N.length,i.m.g.C.innerHTML="Color Scheme #"+(i.R.M+1),i.h?i.R.u=!0:i.canvas.V()},D:function(){i.D.M=(i.D.M+1)%i.D.N.length,i.m.g.C.innerHTML="Grid Scheme #"+(i.D.M+1),i.h?i.D.u=!0:i.canvas.V()},st:function(){var t,s,n="",o="",h="";for(t=0;t<i.P.j.length;t++){for(o+='{"'+i.P.j[t][0]+'":[',s=1;s<i.P.j[t].length;s++)o+=i.P.j[t][s]+",";o=o.substring(0,o.length-1)+"]},"}0!==(o=o.substring(0,o.length-1)+"").length&&(n=-1===window.location.href.indexOf("?")?window.location.href:window.location.href.slice(0,window.location.href.indexOf("?")),h="?autoplay=0&trail="+(i.k.M?"1":"0")+"&grid="+(i.D.M+1)+"&colors="+(i.R.M+1)+"&zoom="+(i.zoom.M+1)+"&s=["+o+"]",document.getElementById("exportUrlLink").href=h,document.getElementById("exportTinyUrlLink").href="http://tinyurl.com/api-create.php?url="+n+h,document.getElementById("exportUrl").style.display="inline")}}},canvas:{context:null,width:null,height:null,wt:null,I:null,pt:null,init:function(){this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.I=i.zoom.N[i.zoom.M].I,this.pt=1,i.X.tt(this.canvas,"mousedown",i.$.at,!1),i.X.tt(document,"mouseup",i.$.ft,!1),i.X.tt(this.canvas,"mousemove",i.$.vt,!1),this.K()},K:function(){var t,s;for(this.wt=[],t=0;t<i.columns;t++)for(this.wt[t]=[],s=0;s<i.rows;s++)this.wt[t][s]=0},V:function(){var t,s;for(""===i.D.N[i.D.M].color?(this.gt(),this.width=this.height=0):(this.Ct(),this.width=this.height=1),this.width=this.width+this.pt*i.columns+this.I*i.columns,this.canvas.setAttribute("width",this.width),this.height=this.height+this.pt*i.rows+this.I*i.rows,this.canvas.setAttribute("height",this.height),this.context.fillStyle=i.D.N[i.D.M].color,this.context.fillRect(0,0,this.width,this.height),t=0;t<i.columns;t++)for(s=0;s<i.rows;s++)i.P.bt(t,s)?this.Et(t,s,!0):this.Et(t,s,!1)},gt:function(){this.I=i.zoom.N[i.zoom.M].I+1,this.pt=0},Ct:function(){this.I=i.zoom.N[i.zoom.M].I,this.pt=1},Et:function(t,s,n){n?this.wt[t][s]>-1&&(this.context.fillStyle=i.R.N[i.R.M].O[this.wt[t][s]%i.R.N[i.R.M].O.length]):i.k.M&&this.wt[t][s]<0?this.context.fillStyle=i.R.N[i.R.M].k[-1*this.wt[t][s]%i.R.N[i.R.M].k.length]:this.context.fillStyle=i.R.N[i.R.M].U,this.context.fillRect(this.pt+this.pt*t+this.I*t,this.pt+this.pt*s+this.I*s,this.I,this.I)},dt:function(t,s){i.P.bt(t,s)?(this.rt(t,s),i.P.St(t,s,i.P.j)):(this.ht(t,s),i.P._(t,s,i.P.j))},et:function(t,s){t>=0&&t<i.columns&&s>=0&&s<i.rows&&(this.wt[t][s]++,this.Et(t,s,!0))},ht:function(t,s){t>=0&&t<i.columns&&s>=0&&s<i.rows&&(this.wt[t][s]=1,this.Et(t,s,!0))},rt:function(t,s){t>=0&&t<i.columns&&s>=0&&s<i.rows&&(this.wt[t][s]=-this.wt[t][s],this.Et(t,s,!1))}},P:{j:[],ot:[],init:function(){this.j=[]},q:function(){var t,i,s,n,o,h,e,r,u,l,c=0,a={},F=[];for(this.ot=[],s=0;s<this.j.length;s++)for(this.kt=1,this.Mt=1,n=1;n<this.j[s].length;n++){for(l=[[(t=this.j[s][n])-1,(i=this.j[s][0])-1,1],[t,i-1,1],[t+1,i-1,1],[t-1,i,1],[t+1,i,1],[t-1,i+1,1],[t,i+1,1],[t+1,i+1,1]],u=this.xt(t,i,s,l),o=0;o<8;o++)void 0!==l[o]&&(void 0===a[h=l[o][0]+","+l[o][1]]?a[h]=1:a[h]++);0===u||1===u||u>3?this.ot.push([t,i,0]):(this._(t,i,F),c++,this.ot.push([t,i,2]))}for(h in a)3===a[h]&&(h=h.split(","),e=parseInt(h[0],10),r=parseInt(h[1],10),this._(e,r,F),c++,this.ot.push([e,r,1]));return this.j=F,c},kt:1,yt:1,Mt:1,xt:function(t,i,s,n){var o,h=0;if(void 0!==this.j[s-1]&&this.j[s-1][0]===i-1)for(o=this.kt;o<this.j[s-1].length&&!(this.j[s-1][o]>=t-1&&(this.j[s-1][o]===t-1&&(n[0]=void 0,this.kt=o+1,h++),this.j[s-1][o]===t&&(n[1]=void 0,this.kt=o,h++),this.j[s-1][o]===t+1&&(n[2]=void 0,this.kt=1==o?1:o-1,h++),this.j[s-1][o]>t+1));o++);for(o=1;o<this.j[s].length&&!(this.j[s][o]>=t-1&&(this.j[s][o]===t-1&&(n[3]=void 0,h++),this.j[s][o]===t+1&&(n[4]=void 0,h++),this.j[s][o]>t+1));o++);if(void 0!==this.j[s+1]&&this.j[s+1][0]===i+1)for(o=this.Mt;o<this.j[s+1].length&&!(this.j[s+1][o]>=t-1&&(this.j[s+1][o]===t-1&&(n[5]=void 0,this.Mt=o+1,h++),this.j[s+1][o]===t&&(n[6]=void 0,this.Mt=o,h++),this.j[s+1][o]===t+1&&(n[7]=void 0,this.Mt=1==o?1:o-1,h++),this.j[s+1][o]>t+1));o++);return h},bt:function(t,i){var s,n;for(s=0;s<this.j.length;s++)if(this.j[s][0]===i)for(n=1;n<this.j[s].length;n++)if(this.j[s][n]===t)return!0;return!1},St:function(t,i,s){var n,o;for(n=0;n<s.length;n++)if(s[n][0]===i)if(2===s[n].length)s.splice(n,1);else for(o=1;o<s[n].length;o++)s[n][o]===t&&s[n].splice(o,1)},_:function(t,i,s){if(0!==s.length){var n,o,h,e,r,u=[];if(i<s[0][0]){for(u=[[i,t]],n=0;n<s.length;n++)u[n+1]=s[n];for(n=0;n<u.length;n++)s[n]=u[n]}else if(i>s[s.length-1][0])s[s.length]=[i,t];else for(o=0;o<s.length;o++){if(s[o][0]===i){for(e=[],r=!1,h=1;h<s[o].length;h++)!r&&t<s[o][h]&&(e.push(t),r=!r),e.push(s[o][h]);return e.unshift(i),r||e.push(t),void(s[o]=e)}if(i<s[o][0]){for(u=[],n=0;n<s.length;n++)n===o?(u[n]=[i,t],u[n+1]=s[n]):n<o?u[n]=s[n]:n>o&&(u[n+1]=s[n]);for(n=0;n<u.length;n++)s[n]=u[n];return}}}else s.push([i,t])}},X:{Dt:null,random:function(t,i){return t<=i?t+Math.round(Math.random()*(i-t)):null},W:function(t){var i,s,n;if(null===this.Dt)for(this.Dt=[],s=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<s.length;n++)i=s[n].split("="),this.Dt.push(i[0]),this.Dt[parseInt(i[0],10)]=i[1];return this.Dt[t]},tt:function(t,i,s,n){/msie/i.test(navigator.userAgent)?t.attachEvent("on"+i,s):t.addEventListener(i,s,n)},Ft:function(t){var s,n,o=0,h=0,e=0,r=0,u=i.zoom.N[i.zoom.M].I+1;for((s=t)||(s=window.event),s.pageX||s.pageY?(o=s.pageX,h=s.pageY):(s.clientX||s.clientY)&&(o=s.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,h=s.clientY+document.body.scrollTop+document.documentElement.scrollTop),n=s.target||s.srcElement;n.offsetParent;)r+=n.offsetLeft,e+=n.offsetTop,n=n.offsetParent;return n.Nt=e,n.It=r,[Math.ceil((o-n.It)/u-1),Math.ceil((h-n.Nt)/u-1)]}}};i.X.tt(window,"load",(function(){i.init()}),!1)}();